class SymbolMapper {
    constructor(mapping) {
        this.mapping = mapping;
    }

    getSymbolsForChar(char) {
        return this.mapping[char] || null;
    }

    getReversedMapping() {
        const reversedMapping = {};
        for (const char in this.mapping) {
            this.mapping[char].forEach(symbol => {
                reversedMapping[symbol] = char;
            });
        }
        return reversedMapping;
    }
}

class NoiseGenerator {
    constructor(noiseSymbols) {
        this.noiseSymbols = noiseSymbols;
    }

    addNoise() {
        const randomIndex = Math.floor(
            Math.random() * this.noiseSymbols.length
        );
        return this.noiseSymbols[randomIndex];
    }

    isNoise(symbol) {
        return this.noiseSymbols.includes(symbol);
    }
}

class UDC {
    constructor(symbolMapper, noiseGenerator) {
        this.symbolMapper = symbolMapper;
        this.noiseGenerator = noiseGenerator;
    }

    encryptText(text) {
        let encrypted = "";
        const noiseFrequency = Math.floor(Math.random() * 3) + 1;

        text.toUpperCase()
            .split("")
            .forEach(char => {
                const symbols = this.symbolMapper.getSymbolsForChar(char);

                if (symbols) {
                    encrypted +=
                        symbols[Math.floor(Math.random() * symbols.length)] +
                        " ";
                    if (Math.floor(Math.random() * noiseFrequency) === 1) {
                        encrypted += this.noiseGenerator.addNoise() + " ";
                    }
                } else {
                    encrypted += "? ";
                }
            });

        return encrypted.trim();
    }

    decryptText(encryptedText) {
        const reversedMapping = this.symbolMapper.getReversedMapping();
        let decrypted = "";

        encryptedText.split(" ").forEach(code => {
            if (reversedMapping[code]) {
                decrypted += reversedMapping[code];
            } else if (!this.noiseGenerator.isNoise(code)) {
                decrypted += "?";
            }
        });

        return decrypted;
    }

    output(text, addNewLine = true) {
        console.log(text);
        if (addNewLine) {
            console.log("\n");
        }
    }
}

// Example usage:
const symbolMapping = {
    A: ["ğ‘„ğ‘€²ğ“‹†ğ‘¼", "ğ‘€¦ğ‘Œ¶ğ‘›ğ¬Œ", "ğ‘‹ğ“‹ğ‘€ğ“…", "ğ“‚‡ğ“…•ğ¬›ğ¬°"],
    B: ["ğ‘­ğ‘Œ¦ğ“ˆ‰ğ‘œ", "ğ¬“ğ‘’ğ“¯ğ“€", "ğ“ˆ‰ğ¬¯ğ‘ ğ‘…•", "ğ‘·ğ“‹£ğ‘Œ¨ğ“Œª"],
    C: ["ğ“­ğ“„¿ğ¬€ğ‘Œ³", "ğ¬¢ğ‘¦ğ“‡½ğ“‚·", "ğ‘€˜ğ¬¢ğ‘ˆğ‘ ", "ğ“—ğ‘–ğ“ˆğ¬®"],
    D: ["ğ‘‰ğ‘Œ•ğ“£ğ‘€ª", "ğ“…¯ğ¬ğ‘Œ’ğˆ", "ğ¬´ğ¬™ğ“‹ğ“ˆš", "ğ‘€¦ğ“‹ğ¬ğ¬³"],
    E: ["ğ¬‰ğ‘‡ğ“‰ŒğŒ…", "ğ“‚‹ğ‘…•ğ‘€œğ¬‹", "ğ“„­ğ‘Œ¶ğ“†•ğ¬‡", "ğ‘Šğ‘…›ğ‘€’ğ¦—"],
    F: ["ğ“†¶ğ‘—ğ“ˆ…ğ‘€¸", "ğ‘€®ğ‘Œ½ğ“‡½ğ¬“", "ğ¬—ğ‘€“ğŒˆğ‘€§", "ğ‘‡ğ¬…ğ“„–ğ¬º"],
    G: ["ğ¬¤ğ“Œ±ğ‘€²ğ‘Œ‹", "ğ‘Œ–ğ‘€¡ğ“‹¦ğ“‡»", "ğ‘¢ğ‘ğ‘€ğ“Š", "ğˆğ“—ğ‘ğ¬…"],
    H: ["ğ‘ ğ¬¨ğ“Š¨ğ“–", "ğ¬ğ‘Œ‚ğ‘Šğ¦˜", "ğ¬™ğ¬¦ğŒğ“‹š", "ğ­ğ‘‰…ğ¬ ğ“‰"],
    I: ["ğ“ƒ‰ğ¬šğ‘€¢ğ‘", "ğğ¬šğ“‰–ğ¬", "ğ‘ğ“€‚ğ‘€”ğ®·", "ğ“†€ğ¬¸ğ¬°ğ¦…"],
    J: ["ğ‘…™ğ‘€ğ¬šğ‘³", "ğ“œğ‘ğ“‹—ğ¬“", "ğ¬ğ¬²ğ‘€±ğ“", "ğ“±ğ‘ˆƒğ¬¡ğ¬±"],
    K: ["ğ‘Œ…ğ‘…’ğ“…”ğ¬‰", "ğ¬ŒğˆğŒ·ğ‘€™", "ğ‘‰Šğ‘ŸğŒğ­ ", "ğ“‹¦ğ‘Œ¶ğ¬®ğ‘…‘"],
    L: ["ğ‘€¤ğ‘Œ¼ğ‘‘ğ“…œ", "ğ¬ğ¬°ğ‘€…ğ“‹", "ğ‘€”ğ¬—ğ“‹¤ğ‘¶", "ğ‘€¼ğ¬Šğ‘Œ†ğ“‰"],
    M: ["ğ¬¥ğ“—ğ“†¢ğ‘®", "ğ‘€¡ğ¬£ğ¬ªğ“†¤", "ğŒŒğŠğ‘¯ğ¬”", "ğ‘Œ­ğ‘„Œğ¬Ÿğ‘…•"],
    N: ["ğ‘„ğ‘…Œğ¬©ğŒ³", "ğ“…‹ğ©ğ“‰ğŒ”", "ğ¬”ğ‘…£ğ‘£ğ“ˆš", "ğ‘€¯ğ‘…ğ‘€¦ğ“…—"],
    O: ["ğ‘Œ•ğ¬„ğ“„ğ‘„‹", "ğ¬´ğ“ˆƒğ‘Œ­ğ“‡ˆ", "ğ‘€·ğ¬Ÿğ¦’ğŒ¶", "ğ‘„§ğ‘€Œğ“Œµğ‘ˆ"],
    P: ["ğ¬‹ğ¬µğ‘…ƒğ¬¥", "ğ‘”ğ“…­ğ‘Œˆğ‘‡ ", "ğŒğ‘€¡ğ‚ğ“„‡", "ğ¦ ğ“—ğ‘Œ¦ğ‚"],
    Q: ["ğ‘€¯ğŒ—ğ“…±ğ‘š", "ğ“Œğ©•ğ‘€¬ğƒ", "ğ‘…ğŒ™ğ“€¦ğ‘", "ğ‘ğŒ’ğ“–ğ‘£"],
    R: ["ğ“Œ”ğ‘ŒğŒŒğ“", "ğ‘›ğ‘€–ğ‘Œ·ğ¬˜", "ğ¬ªğŒ‹ğ‘Œ§ğ“§", "ğ‘Œƒğ‘Œ•ğ¬‰ğ‘Œ¢"],
    S: ["ğ¬´ğ“¦ğ‘€šğ“‹‰", "ğ‘‡ğŒ±ğ—ğ“‰”", "ğ¬šğ¬¦ğ‘¹ğ©˜", "ğ‘€£ğ©—ğ¬’ğ‘ˆª"],
    T: ["ğ‘ŒŒğ‘€­ğ“„ğ“Œ’", "ğŒ´ğ¬®ğ‘Œ†ğ“‡‰", "ğŒ…ğ‘€µğ¬¬ğŒ", "ğ¬˜ğ¬„ğ“ˆ–ğ¬³"],
    U: ["ğ‘Œ•ğŒˆğ“”ğ“ˆŒ", "ğ¬¯ğŒ¦ğ‘€©ğ‘‡¤", "ğ‘„ğ¬¦ğ‘€Šğ‘ŒŒ", "ğ“Ÿğ¬‰ğ©ğ“‰"],
    V: ["ğ‘ğŒ„ğ“ˆğ“Š–", "ğ“ˆšğ‘Œ”ğ¬Ÿğ¬©", "ğŒ‘ğ‘Œ¤ğ“Š–ğ©š", "ğ™ğ¬Œğ‘€¬ğ‘‡©"],
    W: ["ğ‘Œ­ğ¬°ğ‘‰„ğ“±", "ğ‘Œ°ğ‘€–ğ‘Œ‰ğ¬Ÿ", "ğŒ†ğŒ¡ğ“ˆğ¨£", "ğŒ€ğŒˆğ¬…ğ‘®"],
    X: ["ğ‘‡ğ¬³ğ“‚¸ğ¬“", "ğ‘Œ¬ğŒŠğ“‰‡ğŒ·", "ğ“Š”ğ‘Œ’ğ“‹‘ğ‘Œ·", "ğ“±ğ¬¥ğ¦£ğ‘‡¸"],
    Y: ["ğ‘€¨ğ‘–ğ‘€ƒğ‘€", "ğ‘„Ÿğ¬³ğ¬¦ğ‘Œ¦", "ğ‘‡ğŒ„ğ‘£ğ©", "ğ“†¥ğ‘„ğŒ’ğ“ƒ¨"],
    Z: ["ğ‘‰–ğ¬€ğ¢ğ¬", "ğ‘€Šğ‘Œ—ğŒŒğ¬ ", "ğ©‰ğ“‡ƒğŒ‡ğ‘®", "ğ‘€²ğ‘€Œğ“Œ˜"],
    0: ["ğ‘…ğ“‚‚ğ“±ğ’Š¹", "ğ“… ğ‘¦ğ“‰…ğ’„­", "ğ“‰›ğ‘‰§ğ‘«ğ’„–", "ğ“˜ğ‘¹ğ‘…´ğ“‚¢"],
    1: ["ğ’…‘ğ¬‹ğ’†™ğ‘…", "ğ“‡ğ‘’ğ“‡ğ“„œ", "ğ¬—ğ’‰¾ğ‘¡ğ‘Œ„", "ğ‘‰ğ‘…’ğ‘…ğ“†˜"],
    2: ["ğ“Š‰ğ“†ğ“…‡ğ“‘", "ğ¬–ğ‘¸ğ‘€¢ğ¬¶", "ğ“€–ğ‘€ğ‘Œµğ‘˜", "ğ‘Œ¢ğ“†¡ğ¬‹ğ““"],
    3: ["ğ¬°ğ‘…²ğ“…¤ğ“‹‚", "ğ“‹Œğ‘¾ğ‘§ğ¯", "ğ“…±ğ‘¹ğ“‹‰ğ“†", "ğ¬Ÿğ“‚ğ¬ğ‘Œ¢"],
    4: ["ğ‘¨ğ“‰ğ‘»ğ“Š²", "ğ¬±ğ‘€ğ‘Œ ğ¬£", "ğ“§ğ“‹ğ‘Œ„ğ‘€‚", "ğ“€²ğ‘¼ğ‘•ğ“Š‡"],
    5: ["ğ“Š‡ğ‘¶ğ“‹œğ¬„", "ğ¬œğ‘½ğ¬Ÿğ‘‡", "ğ“…‹ğ¬—ğ“”ğ‘Œ‡", "ğ“…¦ğ‘Œ¡ğ¬‹ğ‘¦"],
    6: ["â™—âš ğŸœ›â§»", "âšâ§¼â™–ğ‡­", "â™›âš˜â«§âšµ", "â§ŸğŸœ¤âš™â™"],
    7: ["âš’â™›âš¿â«¸", "â‚âš°ğ–§†â™œ", "â§¢âš¡ğ‘„¢âš‡", "ğŸœŒâšŸâ™•âš›"],
    8: ["ğ‘…ğ“‚‚ğ“±ğ’Š¹", "ğ“… ğ‘¦ğ“‰…ğ’„­", "ğ“‰›ğ‘‰§ğ‘«ğ’„–", "ğ“˜ğ‘¹ğ‘…´ğ“‚¢"],
    9: ["ğ’…‘ğ¬‹ğ’†™ğ‘…", "ğ“‡ğ‘’ğ“‡ğ“„œ", "ğ¬—ğ’‰¾ğ‘¡ğ‘Œ„", "ğ‘‰ğ‘…’ğ‘…ğ“†˜"],
    ":": ["ğ“Š‰ğ“†ğ“…‡ğ“‘", "ğ¬–ğ‘¸ğ‘€¢ğ¬¶", "ğ“€–ğ‘€ğ‘Œµğ‘˜", "ğ‘Œ¢ğ“†¡ğ¬‹ğ““"],
    ";": ["ğ¬°ğ‘…²ğ“…¤ğ“‹‚", "ğ“‹Œğ‘¾ğ‘§ğ¯", "ğ“…±ğ‘¹ğ“‹‰ğ“†", "ğ¬Ÿğ“‚ğ¬ğ‘Œ¢"],
    "[": ["ğ‘¨ğ“‰ğ‘»ğ“Š²", "ğ¬±ğ‘€ğ‘Œ ğ¬£", "ğ“§ğ“‹ğ‘Œ„ğ‘€‚", "ğ“€²ğ‘¼ğ‘•ğ“Š‡"],
    "]": ["ğ“Š‡ğ‘¶ğ“‹œğ¬„", "ğ¬œğ‘½ğ¬Ÿğ‘‡", "ğ“…‹ğ¬—ğ“”ğ‘Œ‡", "ğ“…¦ğ‘Œ¡ğ¬‹ğ‘¦"],
    " ": ["ğ“„ğ“€²ğ“‹†ğ‘¼", "ğ‘€¦ğ‘Œ¶ğ‘›ğ¬Œ", "ğ‘‹ğ“‹ğ‘€ğ“…", "ğ“‚‡ğ“…•ğ¬›ğ¬°"],
    "-": ["ğ“¶ğ‘’ğ“‚§ğ“‹…", "ğ¬ğ‘Œµğ¬™ğ‘", "ğ‘‰ğ‘¤ğ‘–ğ‘Œ", "ğ“‹†ğ“¾ğ¬¢ğ¬"],
    ",": ["ğ‘…­ğ¬ğ¬€ğ“‚", "ğ“‹ƒğ‘Œ¶ğ‘­ğ‘“", "ğ‘ªğ¬§ğ‘ğ“…œ", "ğ“Š–ğ‘Œ•ğ“…±ğ‘Œ¶"],
    ".": ["ğ‘€ğ¬ğ‘‘ğ“‹‰", "ğ¬¦ğ‘¼ğ‘€Œğ“…›", "ğ“‹‚ğ‘´ğ‘™ğ“‹Š", "ğ‘°ğ‘ğ“‹…ğ‘Œ›"],
    "!": ["ğ‘½ğ¬€ğ‘Œ±ğ¬¨", "ğ“‹ğ‘ğ‘€ğ‘€¥", "ğ“Šƒğ‘—ğ‘Œ¢ğ“…", "ğ¬ğ‘Œğ“„ğ“‹‰"],
    "?": ["ğ‘Œ³ğ“…™ğ¬„ğ‘Œ ", "ğ¬„ğ“‹‘ğ¬€ğ“‚Œ", "ğ“Š˜ğ‘®ğ“‹ƒğ‘€½", "ğ‘°ğ‘…¬ğ‘¶ğ“‹‚"]
};

const noiseSymbols = [
    "â©“",
    "âš¿",
    "â˜¢",
    "â›§",
    "â™¯",
    "â© ",
    "â˜°",
    "âœ°",
    "âƒ",
    "âœ¦",
    "âœ§",
    "âœ©",
    "âœª",
    "âœ«",
    "âœ¬",
    "âœ­",
    "â¨‰",
    "â¨",
    "â¨",
    "â¨‘",
    "â¨’",
    "â¨“",
    "â¨”",
    "â¨•",
    "â¨–",
    "â¨—",
    "â¨˜",
    "â¨™",
    "â¨š",
    "â¨›",
    "â¨œ",
    "â¨",
    "â¨",
    "â¨Ÿ",
    "âš",
    "âšˆ",
    "âš‰",
    "âšŠ",
    "âš‹",
    "âšŒ",
    "âš",
    "âš",
    "âš",
    "âš ",
    "âš¡",
    "âš¢",
    "âš£",
    "âš¤",
    "âš¥",
    "âš¦",
    "âš§",
    "âš¨",
    "â˜¤",
    "â˜¥",
    "â˜¦",
    "â˜§",
    "â˜¨",
    "â˜©",
    "â˜ª",
    "â˜«",
    "â˜¬",
    "â˜­",
    "â˜®",
    "â˜¯",
    "â˜°",
    "â˜±",
    "â˜²",
    "â˜³",
    "â˜´",
    "â˜µ",
    "â˜¶",
    "â˜·",
    "â™ˆ",
    "â™‰",
    "â™Š",
    "â™‹",
    "â™Œ",
    "â™",
    "â™",
    "â™",
    "â™",
    "â™‘",
    "â™’",
    "â™“",
    "â™”",
    "â™•",
    "â™–",
    "â™—",
    "â™˜",
    "â™™",
    "â™š",
    "â™›",
    "â™œ",
    "â™",
    "â™",
    "â™Ÿ",
    "â™ ",
    "â™¥",
    "â™¦",
    "â™£",
    "âš¤",
    "âš¥",
    "âš¦",
    "âš§",
    "âš¨",
    "âš©",
    "âšª",
    "âš«",
    "âš®",
    "âš¯",
    "âš°",
    "âš±",
    "âš²",
    "âš³",
    "âš´",
    "âšµ",
    "âš¶",
    "âš·",
    "âš¸",
    "âš¹",
    "âšº",
    "âš»",
    "âš¼",
    "âš½"
];
const symbolMapper = new SymbolMapper(symbolMapping);
const noiseGenerator = new NoiseGenerator(noiseSymbols);
const textEncryptor = new UDC(symbolMapper, noiseGenerator);

const encrypted = textEncryptor.encryptText("ABC");
textEncryptor.output("Encrypted text: " + encrypted);

const decrypted = textEncryptor.decryptText(encrypted);
textEncryptor.output("Decrypted text: " + decrypted);
